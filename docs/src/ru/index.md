# bitwarden-import-msecure

Переход с mSecure на Bitwarden.

В отличие от встроенного инструмента импорта Bitwarden, этот скрипт не помещает каждый секрет в отдельную папку.
Вместо этого он организует секреты в папки по смыслу и предлагает несколько опций для настройки процесса импорта.

Кроме того, этот простой скрипт на Python может быть легко изменен для удовлетворения ваших конкретных потребностей.

## Установка

### Установка pipx

[`pipx`](https://pypa.github.io/pipx/) создает изолированные среды, чтобы избежать конфликтов с
существующими системными пакетами.

=== "MacOS"
    В терминале выполните:

    ```bash
    brew install pipx
    pipx ensurepath
    ```

=== "Linux"
    Сначала убедитесь, что Python установлен.

    Введите в терминал:

    ```bash
    python3 -m pip install --user pipx
    python3 -m pipx ensurepath
    ```

=== "Windows"
    Сначала установите Python, если он еще не установлен.

    В командной строке введите (если Python был установлен из Microsoft Store, используйте `python3` вместо `python`):

    ```bash
    python -m pip install --user pipx
    ```

### Установка `bitwarden-import-msecure`

В терминале (командной строке) выполните:

```bash
pipx install bitwarden-import-msecure
```

## Использование

В mSecure выберите `File` → `Export` → `CSV...` и сохраните файл.

В терминале (командной строке), открытом в том же каталоге, что и экспортированный файл (или добавьте путь к каталогу):

```bash
bitwarden-import-msecure "mSecure Export File.csv"
```

Это создаст `bitwarden.json` в той же папке, что и исходный файл.

В диалоговом окне Bitwarden выберите `Файл` → `Импорт данных`, выберите формат файла: "Bitwarden (json)".
Выберите ранее созданный файл `bitwarden.json` и нажмите "Импорт данных".


### Расширенное использование

#### Форматы вывода

По умолчанию инструмент создает JSON формат (рекомендуется):

```bash
bitwarden-import-msecure "mSecure Export File.csv"
```

Для CSV формата (устаревший, меньше возможностей):

```bash
bitwarden-import-msecure "mSecure Export File.csv" --format csv
```

#### Обработка пользовательских полей

По умолчанию дополнительные поля mSecure становятся пользовательскими полями Bitwarden:

```bash
bitwarden-import-msecure "mSecure Export File.csv"
```

Чтобы добавить дополнительные поля в заметки:

```bash
bitwarden-import-msecure "mSecure Export File.csv" --extra-fields notes
```

#### Перезапись файлов

Если выходной файл уже существует, используйте `--force`:

```bash
bitwarden-import-msecure "mSecure Export File.csv" --force
```

#### Исправление существующих экспортов

Для пользователей, которые ранее импортировали данные старыми версиями (до 1.5.0), в которых отсутствовали некоторые данные:

1. Экспортируйте текущие данные Bitwarden как JSON: `bitwarden_current.json`
2. Исправьте их недостающими данными из mSecure:
   ```bash
   bitwarden-import-msecure "mSecure Export File.csv" bitwarden_current.json --patch
   ```
3. Удалите все элементы из Bitwarden (сначала сделайте резервную копию!)
4. Импортируйте исправленный `bitwarden_current.json`

#### Все доступные параметры

```bash
bitwarden-import-msecure --help
```

### Как организуются данные

Инструмент автоматически организует ваши данные:

- **Кредитные карты**: Помещаются в папку "bank"
- **Элементы со словом "bank" в названии**: Также помещаются в папку "bank"
- **Помеченные элементы**: Используют тег mSecure как имя папки
- **Логин записи**: Становятся элементами входа Bitwarden с URL
- **Элементы без учетных данных/URL**: Становятся защищенными заметками
- **Поля PIN**: Добавляются как скрытые пользовательские поля

### Соответствие полей

| Поле mSecure | Эквивалент Bitwarden |
|--------------|---------------------|
| Website | URI входа |
| Username | Имя пользователя входа |
| Password | Пароль входа |
| Card Number | Номер карты |
| Security Code | CVV карты |
| PIN | Скрытое пользовательское поле |
| Другие поля | Пользовательские поля или заметки |
